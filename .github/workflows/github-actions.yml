name: docker-run-tests
on: 
  push: 
    branches: [master]
jobs: 
  run-tests: 
    runs-on: ubuntu-latest 
    name: Run React tests 
    steps: 
      - name: Check out Repo 
        uses: actions/checkout@v2 
      - name: Login to Docker Hub 
        uses: docker/login-action@v1
        with: 
          username: ${{ secrets.DOCKER_HUB_USERNAME }}
          password: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}
      - name: Set up Docker Buildx 
        id: buildx 
        uses: docker/setup-buildx-action@v1 
      - name: build 
        run: docker build -t alinisarahmed/docker-react-temp -f Dockerfile.dev 
      - name: test 
        run: docker run alinisarahmed/docker-react-temp npm run test -- --coverage

